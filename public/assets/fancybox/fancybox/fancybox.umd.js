// @fancyapps/ui/Fancybox v4.0.0-alpha.3
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Fancybox={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=a(t);if(e){var o=a(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return c(this,i)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw s}}return i}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=f(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw s}}}}var g=function(t){return"object"===e(t)&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t)};function m(t){return Array.isArray(t)||g(t)}var y=function t(){for(var i=!1,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];"boolean"==typeof o[0]&&(i=o.shift());var a=o[0];if(!a||"object"!==e(a))throw new Error("extendee must be an object");for(var r=o.slice(1),l=r.length,c=0;c<l;c++){var h=r[c];for(var d in h)if(h.hasOwnProperty(d)){var u=h[d];if(i&&m(u)){var f=Array.isArray(u)?[]:{};a[d]=t(!0,a.hasOwnProperty(d)?a[d]:f,u)}else a[d]=u}}return a};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return t=parseFloat(t)||0,Math.round((t+Number.EPSILON)*e)/e},x="undefined"!=typeof window&&window.ResizeObserver||function(){function t(e){i(this,t),this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=e}return o(t,[{key:"observe",value:function(t){if(!this.observables.some((function(e){return e.el===t}))){var e={el:t,size:{height:t.clientHeight,width:t.clientWidth}};this.observables.push(e)}}},{key:"unobserve",value:function(t){this.observables=this.observables.filter((function(e){return e.el!==t}))}},{key:"disconnect",value:function(){this.observables=[]}},{key:"check",value:function(){var t=this.observables.filter((function(t){var e=t.el.clientHeight,i=t.el.clientWidth;if(t.size.height!==e||t.size.width!==i)return t.size.height=e,t.size.width=i,!0})).map((function(t){return t.el}));t.length>0&&this.callback(t),window.requestAnimationFrame(this.boundCheck)}}]),t}(),w=function t(e){return!(!e||e.classList.contains("carousel__track")||e===document.body)&&(function(t){var e=window.getComputedStyle(t)["overflow-y"],i=window.getComputedStyle(t)["overflow-x"],n=("scroll"===e||"auto"===e)&&Math.abs(t.scrollHeight-t.clientHeight)>1,o=("scroll"===i||"auto"===i)&&Math.abs(t.scrollWidth-t.clientWidth)>1;return n||o}(e)?e:t(e.parentNode))},k=function(t){var e=0;return t&&(e=t instanceof SVGElement?Math.min(t.getClientRects()[0].height,t.height.baseVal.value):Math.max(t.offsetHeight,t.scrollHeight)),e},$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.options=y(!0,{},e),this.plugins=[],this.events={};for(var n=0,o=["on","once"];n<o.length;n++)for(var s=o[n],a=0,r=Object.entries(this.options[s]||{});a<r.length;a++){var l=r[a];this[s].apply(this,u(l))}}return o(t,[{key:"option",value:function(t,e){t=String(t);var i,n,o=(i=t,n=this.options,i.split(".").reduce((function(t,e){return t[e]}),n));return"function"==typeof o&&(o=o.call(this,t)),void 0===o?e:o}},{key:"localize",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(function(t,n,o){var s=!1;if(!(s=o?e.option("".concat(n[0]+n.toLowerCase().substring(1),".l10n.").concat(o)):e.option("l10n.".concat(n))))return n;for(var a=0;a<i.length;a++)s=s.split(i[a][0]).join(i[a][1]);return s}))}},{key:"on",value:function(t,e){var i=this;if(g(t)){for(var n=0,o=Object.entries(t);n<o.length;n++){var s=o[n];this.on.apply(this,u(s))}return this}return String(t).split(" ").forEach((function(t){var n=i.events[t]=i.events[t]||[];-1==n.indexOf(e)&&n.push(e)})),this}},{key:"once",value:function(t,e){var i=this;if(g(t)){for(var n=0,o=Object.entries(t);n<o.length;n++){var s=o[n];this.once.apply(this,u(s))}return this}return String(t).split(" ").forEach((function(t){var n=function n(){i.off(t,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];e.call.apply(e,[i,i].concat(s))};n._=e,i.on(t,n)})),this}},{key:"off",value:function(t,e){var i=this;if(!g(t))return t.split(" ").forEach((function(t){var n=i.events[t];if(!n||!n.length)return i;for(var o=-1,s=0,a=n.length;s<a;s++)if(n[s]===e||n[s]._===e){o=s;break}-1!=o&&n.splice(o,1)})),this;for(var n=0,o=Object.entries(t);n<o.length;n++){var s=o[n];this.off.apply(this,u(s))}}},{key:"trigger",value:function(t){var e=this.events[t],i=!0;if(!e||!e.length)return i;e=e.slice(0);for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var a,r=p(e);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(l&&!1===l.call.apply(l,[this,this].concat(o))){i=!1;break}}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"attachPlugins",value:function(t){for(var e={},i=0,n=Object.entries(t||{});i<n.length;i++){var o=d(n[i],2),s=o[0],a=o[1];!1!==this.options[s]&&(e[s]=new a(this),a.defaults&&(this.options[s]=y({},a.defaults,this.options[s])))}for(var r in e)e[r].attach();return this.plugins=Object.assign({},this.plugins,e),this}},{key:"detachPlugins",value:function(){for(var t in this.plugins){var e=void 0;(e=this.plugins[t])&&"function"==typeof e.detach&&e.detach()}return this.plugins={},this}}]),t}(),C={panOnlyWhenZoomed:!1,lockAxis:!1,friction:.72,decelFriction:.92,zoomFriction:.72,bounceForce:.1,baseZoom:1,minZoom:1,maxZoom:2,zoomStep:.5,zoomInCentered:!0,pinchToZoom:!0,textSelection:!0,click:"toggleZoom",clickDelay:250,doubleClick:!1,wheel:"zoom",wheelFactor:30,wheelLimit:3,draggableClass:"is-draggable",draggingClass:"is-dragging"},S=function(t){s(n,t);var e=h(n);function n(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,n),s=y(!0,{},C,s),o=e.call(this,s),!(t&&t instanceof Element))throw new Error("Viewport not found");o.state="init",o.$viewport=t;for(var a=0,r=["handleGestureStart","handleGestureMove","handleGestureEnd","handleWheel","handleClick"];a<r.length;a++){var c=r[a];o[c]=o[c].bind(l(o))}if(o.$content=o.option("content"),o.$content||(o.$content=o.$viewport.querySelector(".panzoom__content")),!o.$content)throw new Error("Content not found");return!1===o.option("textSelection")&&o.$viewport.classList.add("not-selectable"),o.resetValues(),o.attachPlugins(n.Plugins),o.trigger("init"),!0!==o.option("delayMount")&&o.mount(),o}return o(n,[{key:"mount",value:function(){if(this.handleContent(),this.attachEvents(),this.trigger("ready"),"init"===this.state){var t=this.option("baseZoom");1===t?(this.state="ready",this.handleCursor()):this.panTo({scale:t,friction:0})}}},{key:"handleContent",value:function(){var t=this,e=function(){var e=t.$content.naturalWidth;t.maxZoom=t.option("maxZoom"),t.options.maxZoom=function(){var t=this.contentDim.width;return e>0&&t>0?e/t*this.maxZoom:this.maxZoom},t.updateMetrics(),t.trigger(e>0?"load":"error")};this.$content instanceof HTMLImageElement?!0!==this.$content.complete?(this.$content.onload=function(){return e()},this.$content.onerror=function(){return e()}):e():this.updateMetrics()}},{key:"resetValues",value:function(){this.viewportDim={top:0,left:0,width:0,height:0},this.contentDim={width:0,height:0},this.friction=this.option("friction"),this.current={x:0,y:0,scale:1},this.velocity={x:0,y:0,scale:0},this.pan={x:0,y:0,scale:1},this.drag={startTime:null,firstPosition:null,firstPoint:null,startPosition:null,startPoint:null,startDistance:null,endPosition:null,endPoint:null,distance:0,distanceX:0,distanceY:0,elapsedTime:0},this.lockAxis=null,this.pendingAnimateUpdate=null,this.pendingResizeUpdate=null,this.pointers=[]}},{key:"updateMetrics",value:function(){var t,e,i=this.$viewport.getClientRects()[0],n=i.top,o=i.left;this.viewportDim={top:n,left:o,width:this.$viewport.clientWidth,height:this.$viewport.clientHeight},this.contentDim={width:this.option("width",(t=this.$content,e=0,t&&(e=t instanceof SVGElement?Math.min(t.getClientRects()[0].width,t.width.baseVal.value):Math.max(t.offsetWidth,t.scrollWidth)),e)),height:this.option("hidth",k(this.$content))},this.trigger("updateMetrics"),this.updateBounds()}},{key:"updateBounds",value:function(t){var e={from:0,to:0},i={from:0,to:0};if(t||(t=this.velocity.scale?this.pan.scale:this.current.scale),t<1)return[e,i];var n=this.contentDim,o=this.viewportDim,s=n.width*t,a=n.height*t;return e.to=b(.5*(s-n.width)),n.width>o.width?e.from=b(e.to+o.width-s):e.from=b(-1*e.to),i.to=b(.5*(a-n.height)),n.height>o.height?i.from=b(i.to+o.height-a):i.from=b(-1*i.to),this.boundX=e,this.boundY=i,this.trigger("updateBounds",t),[this.boundX,this.boundY]}},{key:"zoomIn",value:function(t){this.zoomTo(this.current.scale+(t||this.option("zoomStep")))}},{key:"zoomOut",value:function(t){this.zoomTo(this.current.scale-(t||this.option("zoomStep")))}},{key:"toggleZoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.option("maxZoom"),i=this.option("baseZoom");this.zoomTo(this.current.scale>i+.5*(e-i)?i:e,t)}},{key:"zoomTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.x,n=void 0===i?null:i,o=e.y,s=void 0===o?null:o,a=e.friction,r=void 0===a?this.option("zoomFriction"):a;t||(t=this.option("baseZoom")),t=Math.max(Math.min(t,this.option("maxZoom")),this.option("minZoom"));var l=this.contentDim.width,c=this.contentDim.height,h=l*this.current.scale,d=c*this.current.scale,u=l*t,f=c*t;null===n&&(n=.5*h),null===s&&(s=.5*d),!1===this.option("zoomInCentered")&&(n<.5*h&&(n=h),n>h&&(n=0),s<0&&(s=d),s>d&&(s=0));var v=h>0?n/h:0,p=d>0?s/d:0,g=(u-h)*(v-.5),m=(f-d)*(p-.5);Math.abs(g)<1&&(g=0),Math.abs(m)<1&&(m=0),n=this.current.x-g,s=this.current.y-m,this.panTo({x:n,y:s,scale:t,friction:r})}},{key:"panTo",value:function(t){var e=t.x,i=void 0===e?0:e,n=t.y,o=void 0===n?0:n,s=t.scale,a=void 0===s?this.current.scale:s,r=t.friction,l=void 0===r?this.option("friction"):r,c=t.ignoreBounds;if(!0!==(void 0!==c&&c)){var h=d(this.updateBounds(a),2),u=h[0],f=h[1];u&&(i=Math.max(Math.min(i,u.to),u.from)),f&&(o=Math.max(Math.min(o,f.to),f.from))}return l>0&&(Math.abs(i-this.current.x)>.1||Math.abs(o-this.current.y)>.1||Math.abs(a-this.current.scale)>.1)?(this.state="panning",this.friction=l,this.pan={x:i,y:o,scale:a},this.velocity={x:(1/this.friction-1)*(i-this.current.x),y:(1/this.friction-1)*(o-this.current.y),scale:(1/this.friction-1)*(a-this.current.scale)},this.animate(),this):(this.pendingAnimateUpdate&&(cancelAnimationFrame(this.pendingAnimateUpdate),this.pendingAnimateUpdate=null),this.state="ready",this.stopMoving(),this.current={x:i,y:o,scale:a},this.transform(),this.handleCursor(),this.trigger("afterAnimate",!0),this)}},{key:"animate",value:function(){var t=this;if(!this.pendingAnimateUpdate){if(this.applyBoundForce(),this.applyDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.current.x+=this.velocity.x,this.current.y+=this.velocity.y,this.current.scale+=this.velocity.scale,"dragging"==this.state||"pointerdown"==this.state||Math.abs(this.velocity.x)>.05||Math.abs(this.velocity.y)>.05||Math.abs(this.velocity.scale)>.05)return this.transform(),void(this.pendingAnimateUpdate=requestAnimationFrame((function(){t.pendingAnimateUpdate=null,t.animate()})));this.current.x=b(this.current.x+this.velocity.x/(1/this.friction-1)),this.current.y=b(this.current.y+this.velocity.y/(1/this.friction-1)),Math.abs(this.current.x)<.5&&(this.current.x=0),Math.abs(this.current.y)<.5&&(this.current.y=0),this.current.scale=b(this.current.scale+this.velocity.scale/(1/this.friction-1),1e4),Math.abs(this.current.scale-1)<.01&&(this.current.scale=1),this.state="ready",this.stopMoving(),this.transform(),this.handleCursor(),this.trigger("afterAnimate")}}},{key:"handleCursor",value:function(){var t=this.option("draggableClass");this.contentDim.width<this.viewportDim.width&&1==this.option("panOnlyWhenZoomed")&&this.current.scale<=this.option("baseZoom")?this.$viewport.classList.remove(t):t&&this.$viewport.classList.add(t)}},{key:"isMoved",value:function(){return 0!==this.current.x||0!==this.current.y||1!==this.current.scale||this.velocity.x>0||this.velocity.y>0||this.velocity.scale>0}},{key:"stopMoving",value:function(){this.velocity={x:0,y:0,scale:0}}},{key:"transform",value:function(){this.trigger("beforeTransform");var t=b(this.current.x,100),e=b(this.current.y,100),i=b(this.current.scale,1e5);this.$content.style.transform=0===t&&0===e&&1===i?"":"translate3d(".concat(t,"px, ").concat(e,"px, 0px) scale(").concat(i,")"),this.trigger("afterTransform")}},{key:"applyBoundForce",value:function(){if("decel"===this.state){var t,e,i,n,o={x:0,y:0},s=this.option("bounceForce"),a=this.boundX,r=this.boundY;if(a&&(t=this.current.x<a.from,e=this.current.x>a.to),r&&(i=this.current.y<r.from,n=this.current.y>r.to),t||e){var l=(t?a.from:a.to)-this.current.x,c=l*s,h=this.current.x+(this.velocity.x+c)/(1/this.friction-1);t&&h<a.from||e&&h>a.to||(c=l*s-this.velocity.x),o.x=c}if(i||n){var d=(i?r.from:r.to)-this.current.y,u=d*s,f=this.current.y+(this.velocity.y+u)/(1/this.friction-1);i&&f<r.from||n&&f>r.to||(u=d*s-this.velocity.y),o.y=u}this.velocity.x+=o.x,this.velocity.y+=o.y}}},{key:"applyDragForce",value:function(){"dragging"===this.state&&(this.velocity={x:(1/this.friction-1)*(this.drag.endPosition.x-this.current.x),y:(1/this.friction-1)*(this.drag.endPosition.y-this.current.y),scale:(1/this.friction-1)*(this.drag.endPosition.scale-this.current.scale)})}},{key:"attachEvents",value:function(){var t=this;this.resizeObserver||(this.pendingResizeUpdate=null,this.resizeObserver=new x((function(e){t.pendingResizeUpdate||(t.pendingResizeUpdate=requestAnimationFrame((function(){t.pendingResizeUpdate=null;var i=e&&e[0].contentRect;i||(i=t.$viewport.getBoundingClientRect()),(Math.abs(i.width-t.viewportDim.width)>1||Math.abs(i.height-t.viewportDim.height)>1)&&t.updateMetrics()})))}))),this.resizeObserver.observe(this.$viewport);var e=this.$viewport;window.PointerEvent?(e.addEventListener("pointerdown",this.handleGestureStart,{passive:!1}),e.addEventListener("pointermove",this.handleGestureMove,{passive:!1}),e.addEventListener("pointerup",this.handleGestureEnd),e.addEventListener("pointercancel",this.handleGestureEnd)):(e.addEventListener("touchstart",this.handleGestureStart,{passive:!1}),e.addEventListener("touchmove",this.handleGestureMove,{passive:!1}),e.addEventListener("touchend",this.handleGestureEnd),e.addEventListener("touchcancel",this.handleGestureEnd),e.addEventListener("mousedown",this.handleGestureStart)),e.addEventListener("click",this.handleClick,{passive:!1}),e.addEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"detachEvents",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null,this.pendingResizeUpdate&&(cancelAnimationFrame(this.pendingResizeUpdate),this.pendingResizeUpdate=null);var t=this.$viewport;window.PointerEvent?(t.removeEventListener("pointerdown",this.handleGestureStart,{passive:!1}),t.removeEventListener("pointermove",this.handleGestureMove,{passive:!1}),t.removeEventListener("pointerup",this.handleGestureEnd),t.removeEventListener("pointercancel",this.handleGestureEnd)):(t.removeEventListener("touchstart",this.handleGestureStart,{passive:!1}),t.removeEventListener("touchmove",this.handleGestureMove,{passive:!1}),t.removeEventListener("touchend",this.handleGestureEnd),t.removeEventListener("touchcancel",this.handleGestureEnd),t.removeEventListener("mousedown",this.handleGestureStart)),t.removeEventListener("click",this.handleClick,{passive:!1}),t.removeEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"copyPointer",value:function(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}}},{key:"findPointerIndex",value:function(t){for(var e=this.pointers.length;e--;)if(this.pointers[e].pointerId===t.pointerId)return e;return-1}},{key:"addPointer",value:function(t){var e;if(t.touches&&t.touches.length){e=0;var i,n=p(t.touches);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.pointerId=e++,this.addPointer(o)}}catch(t){n.e(t)}finally{n.f()}}else(e=this.findPointerIndex(t))>-1&&this.pointers.splice(e,1),this.pointers.push(t)}},{key:"removePointer",value:function(t){if(t.touches)for(;this.pointers.length;)this.pointers.pop();else{var e=this.findPointerIndex(t);e>-1&&this.pointers.splice(e,1)}}},{key:"getMiddlePoint",value:function(){var t=u(this.pointers),e=(t=t.sort((function(t,e){return e.pointerId-t.pointerId}))).shift(),i=t.shift();return i?{clientX:.5*(e.clientX-i.clientX)+i.clientX,clientY:.5*(e.clientY-i.clientY)+i.clientY}:{clientX:e?e.clientX:0,clientY:e?e.clientY:0}}},{key:"getDistance",value:function(t,e){if(!(t=(t=t||u(this.pointers)).slice())||t.length<2)return 0;var i=(t=t.sort((function(t,e){return e.pointerId-t.pointerId}))).shift(),n=t.shift(),o=Math.abs(n.clientX-i.clientX);if("x"===e)return o;var s=Math.abs(n.clientY-i.clientY);return"y"===e?s:Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}},{key:"resetDragState",value:function(){var t=this.$content.getClientRects()[0],e=t.left,i=t.top,n=this.getMiddlePoint(),o={top:i,left:e,x:this.current.x,y:this.current.y,scale:this.current.scale};y(this.drag,{startPosition:y({},o),startPoint:y({},n),startDistance:this.getDistance(),endPosition:y({},o),endPoint:y({},n),distance:0,distanceX:0,distanceY:0}),"pointerdown"===this.state&&(this.lockAxis=null,this.drag.startTime=new Date,this.drag.firstPosition=Object.assign({},o)),this.friction=this.option("friction"),this.stopMoving()}},{key:"handleGestureStart",value:function(t){if(t&&!(t.button&&t.button>0)){if(this.resetDragState(),!this.pointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(t.target.nodeName))return;if(this.option("textSelection")&&function(t,e,i){for(var n=t.childNodes,o=document.createRange(),s=0;s<n.length;s++){var a=n[s];if(a.nodeType===Node.TEXT_NODE){o.selectNodeContents(a);var r=o.getBoundingClientRect();if(e>=r.left&&i>=r.top&&e<=r.right&&i<=r.bottom)return a}}return!1}(t.target,t.clientX,t.clientY))return;if(w(t.target))return}var e;if((e=window.getSelection?window.getSelection():document.selection)&&e.rangeCount&&e.getRangeAt(0).getClientRects().length&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty()),this.pointers.length>1||this.pointers.length&&this.lockAxis)t.preventDefault();else if(!1!==this.trigger("touchStart",t))if(t.preventDefault(),this.state="pointerdown",this.addPointer(this.copyPointer(t)),this.resetDragState(),window.PointerEvent)try{t.target.setPointerCapture(t.pointerId)}catch(t){}else document.addEventListener("mousemove",this.handleGestureMove,{passive:!1}),document.addEventListener("mouseup",this.handleGestureEnd,{passive:!1})}}},{key:"handleGestureMove",value:function(t){if(!(t.targetTouches&&t.targetTouches.length>1||"pointerdown"!==this.state&&"dragging"!==this.state))if(0!=this.trigger("touchMove",t)){if(this.addPointer(this.copyPointer(t)),!(this.pointers.length>1&&!1===this.option("pinchToZoom")))if(1==this.option("panOnlyWhenZoomed")&&this.current.scale===this.option("baseZoom")&&this.pointers.length<2)t.preventDefault();else{var e=this.getMiddlePoint(),i=[e,this.drag.startPoint];this.drag.distance=this.getDistance(i);var n=this.events.click&&this.events.click.length||this.events.doubleClick&&this.events.doubleClick.length||this.option.click||this.option.doubleClick;if(!(this.drag.distance<6&&(n||this.option("lockAxis")&&!this.lockAxis))&&("pointerdown"==this.state&&(this.state="dragging"),"dragging"===this.state)){var o=this.option("lockAxis");if(!this.lockAxis&&o)if("xy"===o){var s=this.getDistance(i,"x"),a=this.getDistance(i,"y"),r=Math.abs(180*Math.atan2(a,s)/Math.PI);this.lockAxis=r>45&&r<135?"y":"x"}else this.lockAxis=o;t.preventDefault(),t.stopPropagation(),this.$viewport.classList.add(this.option("draggingClass")),this.animate();var l=this.current.scale,c=0,h=0;if(this.current.scale===this.option("baseZoom")&&"y"===this.lockAxis||(c=e.clientX-this.drag.startPoint.clientX),this.current.scale===this.option("baseZoom")&&"x"===this.lockAxis||(h=e.clientY-this.drag.startPoint.clientY),this.drag.endPosition.x=this.drag.startPosition.x+c,this.drag.endPosition.y=this.drag.startPosition.y+h,this.pointers.length>1){this.drag.middlePoint=e,l=this.drag.startPosition.scale*this.getDistance()/this.drag.startDistance,l=Math.max(Math.min(l,2*this.option("maxZoom")),.5*this.option("minZoom"));var d=this.$content.width,u=this.$content.height,f=d*this.drag.startPosition.scale,v=u*this.drag.startPosition.scale,p=u*l,g=(d*l-f)*((this.drag.startPoint.clientX-this.drag.startPosition.left)/f-.5),m=(p-v)*((this.drag.startPoint.clientY-this.drag.startPosition.top)/v-.5);this.drag.endPosition.x-=g,this.drag.endPosition.y-=m,this.drag.endPosition.scale=l,this.updateBounds(l)}this.applyDragResistance()}}}else t.preventDefault()}},{key:"handleGestureEnd",value:function(t){if(this.removePointer(t),window.PointerEvent)try{t.target.releasePointerCapture(t.pointerId)}catch(t){}else document.removeEventListener("mousemove",this.handleGestureMove,{passive:!1}),document.removeEventListener("mouseup",this.handleGestureEnd,{passive:!1});if(this.pointers.length>0)return t.preventDefault(),void this.resetDragState();if("pointerdown"===this.state||"dragging"===this.state){this.$viewport.classList.remove(this.option("draggingClass"));var e=this.$content.getClientRects()[0],i=e.top,n=e.left,o=this.drag;if(y(!0,o,{elapsedTime:new Date-o.startTime,distanceX:o.endPosition.x-o.firstPosition.x,distanceY:o.endPosition.y-o.firstPosition.y,endPosition:{top:i,left:n}}),o.distance=Math.sqrt(Math.pow(o.distanceX,2)+Math.pow(o.distanceY,2)),this.state="decel",this.friction=this.option("decelFriction"),this.pan={x:this.current.x+this.velocity.x/(1/this.friction-1),y:this.current.y+this.velocity.y/(1/this.friction-1),scale:this.current.scale+this.velocity.scale/(1/this.friction-1)},!1!==this.trigger("touchEnd",t)&&"decel"===this.state){var s=this.option("minZoom");if(this.current.scale<s)this.zoomTo(s,{friction:.64});else{var a=this.option("maxZoom");if(this.current.scale-a>.01){var r={friction:.64};o.middlePoint&&(r.x=o.middlePoint.clientX-n,r.y=o.middlePoint.clientY-i),this.zoomTo(a,r)}}}}}},{key:"applyDragResistance",value:function(){var t,e,i,n,o=this.boundX,s=this.boundY;if(o&&(t=this.drag.endPosition.x<o.from,e=this.drag.endPosition.x>o.to),s&&(i=this.drag.endPosition.y<s.from,n=this.drag.endPosition.y>s.to),t||e){var a=t?o.from:o.to,r=this.drag.endPosition.x-a;this.drag.endPosition.x=a+.3*r}if(i||n){var l=i?s.from:s.to,c=this.drag.endPosition.y-l;this.drag.endPosition.y=l+.3*c}}},{key:"handleWheel",value:function(t){!1!==this.trigger("wheel",t)&&"zoom"==this.option("wheel",t)&&this.zoomWithWheel(t)}},{key:"zoomWithWheel",value:function(t){void 0===this.changedDelta&&(this.changedDelta=0);var e=this.current.scale,i=Math.max(-1,Math.min(1,-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail));if(i<0&&e<=this.option("minZoom")||i>0&&e>=this.option("maxZoom")){if(this.changedDelta+=Math.abs(i),this.changedDelta>this.option("wheelLimit"))return}else this.changedDelta=0;e=e*(100+i*this.option("wheelFactor"))/100,t.preventDefault();var n=this.$content.getClientRects()[0],o=n.top,s=n.left,a=t.clientX-s,r=t.clientY-o;this.zoomTo(e,{x:a,y:r})}},{key:"handleClick",value:function(t){var e=this;if(!t.defaultPrevented){if(window.getSelection().toString().length)return t.stopPropagation(),void t.stopImmediatePropagation();if(this.drag.startPosition&&this.drag.endPosition&&(Math.abs(this.drag.endPosition.top-this.drag.startPosition.top)>1||Math.abs(this.drag.endPosition.left-this.drag.startPosition.left)>1))return t.stopPropagation(),void t.stopImmediatePropagation();if(this.drag.distance>(this.lockAxis?6:1))return t.preventDefault(),t.stopPropagation(),void t.stopImmediatePropagation();var i=null,n=null;void 0!==t.clientX&&void 0!==t.clientY&&(i=t.clientX-this.$content.getClientRects()[0].left,n=t.clientY-this.$content.getClientRects()[0].top);var o=this.options.doubleClick;if(!o&&this.events.doubleClick&&this.events.doubleClick.length&&(o=!0),o){if(!this.clickTimer)return this.lastClickEvent=t,void(this.clickTimer=setTimeout((function(){e.clickTimer=null,!1!==e.trigger("click",t)&&"toggleZoom"===e.option("click")&&e.toggleZoom({x:i,y:n})}),this.option("clickDelay")));this.getDistance([t,this.lastClickEvent])>=6||(clearTimeout(this.clickTimer),this.clickTimer=null,!1!==this.trigger("doubleClick",t)&&"toggleZoom"===this.option("doubleClick")&&this.toggleZoom({x:i,y:n}))}else{if(!1===this.trigger("click",t))return;"toggleZoom"===this.option("click")&&this.toggleZoom({x:i,y:n})}}}},{key:"destroy",value:function(){"destroy"!==this.state&&(this.state="destroy",this.$viewport.classList.remove("not-selectable"),this.$content instanceof HTMLImageElement&&!this.$content.complete&&(this.$content.onload=null,this.$content.onerror=null),this.pendingAnimateUpdate&&(cancelAnimationFrame(this.pendingAnimateUpdate),this.pendingAnimateUpdate=null),this.pendingResizeUpdate&&(cancelAnimationFrame(this.pendingResizeUpdate),this.pendingResizeUpdate=null),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.detachEvents(),this.pointers=[],this.events={},this.resetValues(),this.$viewport=null,this.$content=null,this.options={})}}]),n}($);S.version="4.0.0-alpha.3",S.Plugins={};var E=function(t,e){var i=0;return function(){var n=(new Date).getTime();if(!(n-i<e))return i=n,t.apply(void 0,arguments)}},P=function(){function t(e){i(this,t),this.$container=null,this.$prev=null,this.$next=null,this.carousel=e,this.onRefresh=this.onRefresh.bind(this)}return o(t,[{key:"createButton",value:function(t){var e=this,i=document.createElement("button");return i.setAttribute("title",this.carousel.localize("{{".concat(t.toUpperCase(),"}}"))),i.classList.add("carousel__button"),i.classList.add("carousel__button--".concat(t)),i.innerHTML=this.carousel.localize(this.carousel.option("Navigation.".concat(t,"Tpl"))),i.addEventListener("click",(function(i){i.preventDefault(),i.stopPropagation(),e.carousel["slide".concat("next"===t?"Next":"Prev")]()})),i}},{key:"build",value:function(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add("carousel__nav"),this.carousel.$element.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}},{key:"onRefresh",value:function(){var t=this.carousel.pages.length;if(t<=1||t>1&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesToSlide")))return this.cleanup();this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=t-1&&this.$next.setAttribute("disabled",""))}},{key:"cleanup",value:function(){this.$prev&&this.$prev.remove(),this.$next&&this.$next.remove(),this.$container&&this.$container.remove(),this.$next=null,this.$prev=null,this.$container=null}},{key:"attach",value:function(){this.carousel.on("refresh change",this.onRefresh)}},{key:"detach",value:function(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}]),t}();P.defaults={nextTpl:'<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 5L16 12L9 19" /></svg>',prevTpl:'<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15 19L8 12L15 5" /></svg>'};var L=function(){function t(e){i(this,t),this.carousel=e,this.$list=null,this.onRefresh=this.onRefresh.bind(this),this.onChange=this.onChange.bind(this)}return o(t,[{key:"build",value:function(){var t=this,e=document.createElement("ol");return e.classList.add("carousel__dots"),e.addEventListener("click",(function(e){if("page"in e.target.dataset){e.preventDefault(),e.stopPropagation();var i=parseInt(e.target.dataset.page,10);i!==t.carousel.page&&(t.carousel.pages.length<3&&t.carousel.option("infinite")?t.carousel[0==i?"slidePrev":"slideNext"]():t.carousel.slideTo(i))}})),this.$list=e,this.carousel.$element.appendChild(e),this.carousel.$element.classList.add("carousel--has-dots"),e}},{key:"onRefresh",value:function(){var t=this,e=this.$list,i=!!e,n=this.carousel.pages.length;if(n<2)i&&(e.remove(),this.$list=null);else{i||(e=this.build());var o=this.$list.children.length;if(o>n)for(var s=n;s<o;s++)this.$list.removeChild(this.$list.lastChild);else{for(var a=function(e){var i=document.createElement("li");i.classList.add("carousel__dot"),i.dataset.page=e,i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("title",t.carousel.localize("{{GOTO}}",[["%d",e+1]])),i.addEventListener("keyup",(function(t){var e,n=t.keyCode;13===n?e=i:39===n?e=i.nextSibling:37===n&&(e=i.previousSibling),e&&(e.click(),e.focus())})),t.$list.appendChild(i)},r=o;r<n;r++)a(r);i||this.onChange()}}}},{key:"onChange",value:function(){var t=this.carousel.page;if(this.$list&&Number.isInteger(t)){this.$list.childNodes.forEach((function(t){t.classList.remove("carousel__dot--active")}));var e=this.$list.childNodes[t];e&&e.classList.add("carousel__dot--active")}}},{key:"attach",value:function(){this.carousel.on({refresh:this.onRefresh,"ready change":this.onChange})}},{key:"detach",value:function(){this.carousel.off({refresh:this.onRefresh,"ready change":this.onChange}),this.$list&&this.$list.parentNode.removeChild(this.$list),this.$list=null,this.carousel=null}}]),t}(),T=function(){function t(e){i(this,t),this.nav=e,this.selectedIndex=null,this.onNavInit=this.onNavInit.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}return o(t,[{key:"onNavInit",value:function(){this.nav.Panzoom.on("click",this.onNavClick),this.nav.on("createSlide",this.onNavCreateSlide),this.sync.on("change",this.onTargetChange),this.nav.updateMetrics();var t=this.sync.pages[this.sync.page].indexes[0],e=this.nav.pages.find((function(e){return e.indexes.indexOf(t)>-1})),i=this.nav.pages.length,n=(Math.floor(t/this.nav.slides.length)||0)*i+e.index;this.selectedIndex=t,this.nav.options.initialPage=n}},{key:"onNavCreateSlide",value:function(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}},{key:"onNavClick",value:function(t,e){var i=e.target.closest(".carousel__slide");if(i){var n=parseInt(i.dataset.index,10),o=this.sync.pages.find((function(t){return t.indexes.indexOf(n)>-1})).index;this.sync.page!==o&&this.sync.slideTo(o,{friction:this.nav.option("Sync.frictionOnClick")}),this.markSelectedSlide(n)}}},{key:"markSelectedSlide",value:function(t){this.selectedIndex=t,u(this.nav.slides).filter((function(t){return t.$el&&t.$el.classList.remove("is-nav-selected")}));var e=this.nav.slides[t];e&&e.$el&&e.$el.classList.add("is-nav-selected")}},{key:"onTargetChange",value:function(t){var e=t.pages[t.page].indexes[0],i=this.nav.pages.find((function(t){return t.indexes.indexOf(e)>-1})),n=this.nav.pages.length,o=(Math.floor(e/this.nav.slides.length)||0)*n+i.index;this.nav.page!==o&&this.nav.slideTo(o),this.markSelectedSlide(e)}},{key:"attach",value:function(){var t=this.nav.options.Sync;t&&(g(t)&&"object"===e(t.with)&&(this.sync=t.with),this.sync&&this.nav.on("init",this.onNavInit))}},{key:"detach",value:function(){this.sync&&(this.nav.off("init",this.onNavInit),this.nav.off("createSlide",this.onNavCreate),this.sync.off("change",this.onTargetChange)),this.nav.Panzoom.off("click",this.onNavClick),this.sync=null,this.selectedIndex=null}}]),t}();T.defaults={frictionOnClick:.92};var I={Navigation:P,Dots:L,Sync:T},M={snapTo:".carousel__slide",slides:[],preload:0,slidesToSlide:"auto",initialPage:0,friction:.92,center:!0,fill:!0,infinite:!0,dragFree:!1,selectedClass:"is-selected",l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide %d"}},A=function(t){s(n,t);var e=h(n);function n(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,n),s=y(!0,{},M,s),(o=e.call(this,s)).state="init",o.$element=t,o.page=o.pageIndex=null,o.prevPage=o.prevPageIndex=null,o.slideNext=E(o.slideNext.bind(l(o)),200),o.slidePrev=E(o.slidePrev.bind(l(o)),200),o.attachPlugins(n.Plugins),o.initLayout(),o.initSlides(),o.initPanzoom(),o.trigger("init"),!0!==o.option("delayMount")&&o.mount(),o}return o(n,[{key:"mount",value:function(){this.Panzoom.mount(),this.state="ready",this.trigger("ready")}},{key:"initLayout",value:function(){if(!this.$element)throw new Error("No root element provided");this.$viewport=this.option("viewport")||this.$element.querySelector(".carousel__viewport"),this.$viewport||(this.$viewport=document.createElement("div"),this.$viewport.classList.add("carousel__viewport"),this.$element.appendChild(this.$viewport)),this.$track=this.option("track")||this.$element.querySelector(".carousel__track"),this.$track||(this.$track=document.createElement("div"),this.$track.classList.add("carousel__track")),this.$viewport.contains(this.$track)||this.$viewport.insertBefore(this.$track,this.$viewport.firstChild)}},{key:"initSlides",value:function(){var t=this;(this.slides=[],this.options.snapTo)&&this.$viewport.querySelectorAll(this.options.snapTo).forEach((function(e){t.slides.push({$el:e,isDom:!0})}));Array.isArray(this.options.slides)&&(this.slides=y(!0,u(this.slides),this.options.slides))}},{key:"initPanzoom",value:function(){var t=this,e=this;this.Panzoom=new S(this.$viewport,y(!0,{},{delayMount:!0,content:this.$track,click:!1,doubleClick:!1,wheel:!1,pinchToZoom:!1,lockAxis:"x",textSelection:function(){return t.option("textSelection",!1)},panOnlyWhenZoomed:function(){return t.option("panOnlyWhenZoomed",t.elemDimWidth<t.wrapDimWidth)}},this.option("Panzoom"))),this.Panzoom.on("updateBounds",(function(e){var i=t.option("infinite"),n=t.option("infiniteX",i),o=t.option("infiniteY",i);n&&(e.boundX=null),o&&(e.boundY=null),n||o||!t.option("center")||(!0===t.option("fill")?t.elemDimWidth<t.wrapDimWidth&&(e.boundX={from:.5*(t.wrapDimWidth-t.elemDimWidth),to:.5*(t.wrapDimWidth-t.elemDimWidth)}):e.boundX={from:-1*t.pages[t.pages.length-1].left,to:-1*t.pages[0].left})})),this.Panzoom.on("updateMetrics",(function(){var e=t.page;if(null===e&&(e=t.option("initialPage")),t.updateMetrics(),!t.pages[e]){var i=t.pages.length;e=i?t.pages[i-1].index:0}t.slideTo(e,{friction:0})})),this.Panzoom.on("touchEnd",(function(i){var n=t.option("dragFree");if(!n&&t.pages.length>1&&Math.abs(i.drag.distanceY)<1&&Math.abs(i.drag.distanceX)>5&&i.drag.elapsedTime<350)e[i.drag.distanceX<0?"slideNext":"slidePrev"]();else if(n){var o=d(t.getPageFromPosition(-1*t.Panzoom.pan.x),2)[1];e.setPage(o)}else e.slideToClosest()})),this.Panzoom.on("beforeTransform",(function(){t.option("infiniteX",t.option("infinite"))&&t.flipTrackPosition(),t.manageSlideVisiblity()})),this.Panzoom.on("afterAnimate",(function(e,i){i||t.trigger("settle")}))}},{key:"flipTrackPosition",value:function(){if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||this.elemDimWidth<this.wrapDimWidth)){var t=this.Panzoom,e=!1;return t.current.x<-1*(t.contentDim.width-t.viewportDim.width)&&(e=!0,t.current.x+=t.contentDim.width,t.drag.firstPosition&&(t.drag.firstPosition.x+=t.contentDim.width),this.pageIndex=this.pageIndex-this.pages.length),t.current.x>t.viewportDim.width&&(e=!0,t.current.x-=t.contentDim.width,t.drag.firstPosition&&(t.drag.firstPosition.x-=t.contentDim.width),this.pageIndex=this.pageIndex+this.pages.length),e&&"dragging"===t.state&&t.resetDragState(),e}}},{key:"manageSlideVisiblity",value:function(){var t=this,e=this.Panzoom,i=-1*e.current.x,n=this.option("preload"),o=this.elemDimWidth,s=this.wrapDimWidth,a=i-n*s,r=i+s+n*s;if(this.slides.length<3&&(a=i,r=i+s),this.slides.forEach((function(e){e.hasDiff=!1,e.left+e.width>a&&e.left<r&&t.createSlideEl(e)})),o<s||this.slides.length<=1)this.markSelectedSlides();else{if(!0===this.option("infiniteX",this.option("infinite"))){var l=a,c=r;this.slides.forEach((function(e,i){if(l<0){var n=Array.from(t.slides)[t.slides.length-1-i];t.createSlideEl(n),n.$el.style.left="-".concat(o,"px"),l+=n.width,n.hasDiff=!0}c>o&&(t.createSlideEl(e),e.$el.style.left="".concat(o,"px"),c-=e.width,e.hasDiff=!0)}))}this.slides.forEach((function(e){e.$el&&!e.isDom&&!e.hasDiff&&(e.left+e.width<=a||e.left>=r)?t.removeSlideEl(e):e.$el&&!e.hasDiff&&(e.$el.style.left="")}));var h=0,d=0;this.slides.forEach((function(t,e){t.$el?(e!==h?t.$el.style.left="".concat(t.hasDiff?d-o:d,"px"):d=0,h++):d+=t.width})),e.viewportDim.height=e.$content.clientHeight,this.markSelectedSlides()}}},{key:"markSelectedSlides",value:function(){var t=this,e=this.option("selectedClass");this.slides.forEach((function(i,n){var o=i.$el;o&&(t.pages[t.page].indexes.indexOf(n)>-1?(e&&!o.classList.contains(e)&&(o.classList.add(e),t.trigger("selectSlide",i)),o.removeAttribute("aria-hidden")):(e&&o.classList.contains(e)&&(o.classList.remove(e),t.trigger("unselectSlide",i)),o.setAttribute("aria-hidden",!0)))}))}},{key:"createSlideEl",value:function(t){if(t){if(!t.$el){var e=document.createElement("div");e.classList.add("carousel__slide"),e.dataset.index=t.index,t.html&&(e.innerHTML=t.html);var i=[];this.slides.forEach((function(t,e){t.$el&&i.push(e)}));var n=t.index,o=null;if(i.length){var s=i.reduce((function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t}));o=this.slides[s]}return this.$track.insertBefore(e,o&&o.$el?o.index<t.index?o.$el.nextSibling:o.$el:null),t.$el=e,this.trigger("createSlide",t,n),t}var a;parseInt(t.$el.dataset.index,10)!==t.index&&(t.$el.dataset.index=t.index,t.$el.querySelectorAll("[data-lazy-src]").forEach((function(t){var e=t.dataset.lazySrc;t instanceof HTMLImageElement?t.src=e:t.style.backgroundImage="url('".concat(e,"')")})),(a=t.$el.dataset.lazySrc)&&(t.$el.style.backgroundImage="url('".concat(a,"')")),t.state="ready")}}},{key:"updateMetrics",value:function(){var t=this,e=null,i=0,n=[];this.slides.forEach((function(o,s){var a=function(i){if(!i){if(e)return e;(i=document.createElement("div")).id="testEl",i.style.visibility="hidden",i.classList.add("carousel__slide"),t.$track.prepend(i)}var n=i.getBoundingClientRect().width,o=i.currentStyle||window.getComputedStyle(i);return n=n+(parseFloat(o.marginLeft)||0)+(parseFloat(o.marginRight)||0),"testEl"==i.id&&(e=n,i.remove()),n}(o.isDom&&o.$el);o.index=s,o.width=a,o.left=i,i+=a,o.$el&&(o.$el.style.left=""),n.push(s)})),this.elemDimWidth=b(i,1),this.wrapDimWidth=Math.max(this.$viewport.clientWidth,b(this.$viewport.getBoundingClientRect().width)),this.Panzoom.contentDim.width=this.elemDimWidth;var o=[],s=this.options.slidesToSlide;if(Number.isInteger(s))for(var a=0;a<this.slides.length;a+=s)o.push({indexes:n.slice(a,a+s),slides:this.slides.slice(a,a+s)});else for(var r=0,l=0,c=0;c<this.slides.length;c+=1){var h=this.slides[c];(!o.length||l+h.width>this.wrapDimWidth)&&(o.push({indexes:[],slides:[]}),r=o.length-1,l=0),l+=h.width,o[r].indexes.push(c),o[r].slides.push(h)}o.forEach((function(e,i){e.index=i,e.width=e.slides.reduce((function(t,e){return t+e.width}),0),t.options.center?e.left=e.slides[0].left-.5*(t.wrapDimWidth-e.width):e.left=e.slides[0].left})),this.pages=o,this.trigger("refresh")}},{key:"setPage",value:function(t,e){var i=0,n=parseInt(t,10)||0,o=this.page,s=this.pageIndex,a=this.pages.length;if(t=(n%a+a)%a,this.option("infiniteX",this.option("infinite"))&&this.elemDimWidth>this.wrapDimWidth){var r=Math.floor(n/a)||0,l=Math.floor(s/a)||0,c=this.elemDimWidth;if(i=this.pages[t].left+r*c,!0===e&&a>2){var h=this.pages[o]?this.pages[o].left+l*c:0,d=i-c,u=i+c,f=Math.abs(h-i),v=Math.abs(h-d),p=Math.abs(h-u);p<f&&p<=v?(i=u,n+=a):v<f&&v<p&&(i=d,n-=a)}}else t=n=Math.max(0,Math.min(n,a-1)),i=this.pages[t].left;return this.page=t,this.pageIndex=n,t!==o&&null!==o&&(this.prevPage=o,this.prevPageIndex=s,this.trigger("change",t,o)),i}},{key:"slideTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.friction,n=void 0===i?this.option("friction"):i;n||this.Panzoom.stopMoving(),this.Panzoom.panTo({x:-1*this.setPage(t,!0),y:0,friction:n})}},{key:"slideToClosest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getPageFromPosition(-1*this.Panzoom.pan.x),i=d(e,2),n=i[1];this.slideTo(n,t)}},{key:"slideNext",value:function(){this.slideTo(this.pageIndex+1)}},{key:"slidePrev",value:function(){this.slideTo(this.pageIndex-1)}},{key:"getPageFromPosition",value:function(t){var e,i,n=this.pages.length,o=this.pages[0],s=this.pages[n-1];this.options.center?(e=o.left-.5*o.width,i=s.left+.5*s.width):(e=this.pages[0].left,i=s.left+s.width);for(var a=Math.floor((t-e)/(i-e)),r=t-a*this.elemDimWidth,l=0,c=0;c<n;c++){var h=this.pages[c],d=h.width,u=h.left,f=u+d;if(this.options.center&&(u=h.left-.5*d,f=h.left+.5*d),r>=u&&r<f){l=c;break}}return[l,l+a*n]}},{key:"removeSlideEl",value:function(t){t.$el&&!t.isDom&&(this.trigger("deleteSlide",t),t.$el.remove(),t.$el=null)}},{key:"destroy",value:function(){var t=this;this.state="destroy",this.slides.forEach((function(e){t.removeSlideEl(e)})),this.Panzoom.destroy(),this.events={}}}]),n}($);A.version="4.0.0-alpha.3",A.Plugins=I;var z=function(){function t(e){i(this,t),this.fancybox=e,this.viewport=null,this.pendingUpdate=null,this.onInit=this.onInit.bind(this),this.viewportHandler=this.viewportHandler.bind(this),this.handleTouchstart=this.handleTouchstart.bind(this),this.handleTouchmove=this.handleTouchmove.bind(this)}return o(t,[{key:"onInit",value:function(){var t=window.visualViewport;t&&Fancybox&&Fancybox.isMobile&&(this.viewport=t,this.startY=0,t.addEventListener("resize",this.viewportHandler),this.updateViewport(),window.addEventListener("touchstart",this.handleTouchstart,{passive:!1}),window.addEventListener("touchmove",this.handleTouchmove,{passive:!1}))}},{key:"updateViewport",value:function(){var t=window.visualViewport,e=t.scale,i=this.fancybox.$container;i&&(i.style.width="".concat(t.width*e,"px"),i.style.height="".concat(t.height*e,"px"),i.style.transform="translate3d(".concat(t.offsetLeft,"px, ").concat(t.offsetTop,"px, 0) scale(").concat(1/e,");"),this.fancybox.Carousel.updateMetrics())}},{key:"viewportHandler",value:function(){var t=this;this.pendingUpdate||(this.pendingUpdate=requestAnimationFrame((function(){t.pendingUpdate=null,t.updateViewport()})))}},{key:"handleTouchstart",value:function(t){this.startY=t.touches?t.touches[0].screenY:t.screenY}},{key:"handleTouchmove",value:function(t){var e=this.startY,i=window.innerWidth/window.document.documentElement.clientWidth;if(!(t.touches.length>1||1!==i)){var n=t.target,o=w(n);if(o){var s=window.getComputedStyle(o),a=parseInt(s.getPropertyValue("height"),10),r=t.touches?t.touches[0].screenY:t.screenY,l=e<=r&&0===o.scrollTop,c=e>=r&&o.scrollHeight-o.scrollTop===a;(l||c)&&t.preventDefault()}else t.preventDefault()}}},{key:"cleanup",value:function(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var t=this.viewport;t&&(t.removeEventListener("resize",this.viewportHandler),this.viewport=null),window.removeEventListener("touchstart",this.handleTouchstart,!1),window.removeEventListener("touchmove",this.handleTouchmove,!1)}},{key:"attach",value:function(){this.fancybox.on("init",this.onInit)}},{key:"detach",value:function(){this.fancybox.off("init",this.onInit),this.cleanup()}}]),t}(),D=function(){function t(e){i(this,t),this.fancybox=e,this.$wrap=null,this.state="init",this.onInit=this.onInit.bind(this),this.onClosing=this.onClosing.bind(this),this.onKeydown=this.onKeydown.bind(this)}return o(t,[{key:"onInit",value:function(){!0===this.fancybox.option("Thumbs.autoStart")&&this.create()}},{key:"onClosing",value:function(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}},{key:"onKeydown",value:function(t,e){e===t.option("Thumbs.key")&&this.toggle()}},{key:"create",value:function(){var t=this;if("init"===this.state){var e=this.getSlides();if(e.length<this.fancybox.option("Thumbs.minSlideCount"))return!1;var i=document.createElement("div");i.classList.add("fancybox__thumbs"),this.fancybox.$container.appendChild(i),this.Carousel=new A(i,{Dots:!1,Navigation:!1,Sync:{with:this.fancybox.Carousel,frictionOnClick:0},slides:e,infinite:!1,center:!0,dragFree:!0,slidesToSlide:1,preload:1}),this.Carousel.Panzoom.on("wheel",(function(e,i){i.preventDefault(),t.fancybox[i.deltaY<0?"prev":"next"]()})),this.$wrap=i,this.state="ready"}}},{key:"getSlides",value:function(){var t=[];return this.fancybox.options.items.forEach((function(e){var i=e.thumb;if(!i&&e.$trigger){var n=e.$trigger.querySelector("img");n&&(i=n.currentSrc||n.src)}i||e.type&&"image"!==e.type||(i=e.src),i&&(e.thumb=i,t.push({html:'<div class="fancybox__thumb is-type-'.concat(e.type||"image",'" style="background-image:url(').concat(i,')"></div>')}))})),t}},{key:"toggle",value:function(){return"ready"===this.state?(this.Carousel.Panzoom.detachEvents(),this.$wrap.style.display="none",void(this.state="hidden")):"hidden"===this.state?(this.$wrap.style.display="",this.Carousel.Panzoom.attachEvents(),void(this.state="ready")):void this.create()}},{key:"cleanup",value:function(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$wrap&&(this.$wrap.remove(),this.$wrap=null),this.state="init"}},{key:"attach",value:function(){this.fancybox.on({ready:this.onInit,closing:this.onClosing,keydown:this.onKeydown})}},{key:"detach",value:function(){this.fancybox.off({ready:this.onInit,closing:this.onClosing,keydown:this.onKeydown}),this.cleanup()}}]),t}();D.defaults={autoStart:!0,minSlideCount:3,key:"t"};var _=function(){function t(e){i(this,t),this.fancybox=e,this.onInit=this.onInit.bind(this);for(var n=0,o=["onCreateSlide","onDeleteSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"];n<o.length;n++){var s=o[n];this[s]=this[s].bind(this)}this.prepareItems()}return o(t,[{key:"prepareItems",value:function(){var t=this;this.fancybox.options.items.forEach((function(e){!e.type&&e.src&&(e.type=t.fancybox.options.type||t.guessType(e)||t.fancybox.option("defaultType","image"))}))}},{key:"guessType",value:function(t){var e=t.src,i=null,n=null;if("#"===e.charAt(0))i="inline";else if(n=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))i="video",t.video.format="video/"+("ogv"===n[1]?"ogg":n[1]);else if(e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i))i="image";else if(e.match(/\.(pdf)((\?|#).*)?$/i))i="pdf";else if(n=e.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){var o=new URLSearchParams({autoplay:0,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1});t.src="https://www.youtube-nocookie.com/embed/".concat(n[1],"?").concat(o),t.thumb="https://img.youtube.com/vi/".concat(n[1],"/hqdefault.jpg"),t.video="youtube",i="video"}else if(n=e.match(/^.+vimeo.com\/(?:.*\/)?([\d]+)(?:.*)?/)){var s=new URLSearchParams({autoplay:0,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1});t.src="https://player.vimeo.com/video/".concat(n[1],"?").concat(s),t.video="vimeo",i="video"}else(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src="//maps.google.".concat(n[1],"/?ll=").concat((n[2]?n[2]+"&z="+Math.floor(n[3])+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&"),"&output=").concat(n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"),i="map"):(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src="//maps.google.".concat(n[1],"/maps?q=").concat(n[2].replace("query=","q=").replace("api=1",""),"&output=embed"),i="map");return i}},{key:"loadInlineContent",value:function(t){var e;if(t.src instanceof HTMLElement?e=t.src:"string"==typeof t.src&&(e=document.getElementById(t.src.substr(1))),e){if("clone"===t.type||e.$placeHolder){var i=(e=e.cloneNode(!0)).getAttribute("id");i=i?"".concat(i,"--clone"):"clone-".concat(this.fancybox.id,"-").concat(t.index),e.setAttribute("id",i)}else{var n=document.createElement("div");n.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(n,e),e.$placeHolder=n}this.fancybox.setContent(t,e)}else this.fancybox.setError(t,"{{ELEMENT_NOT_FOUND}}")}},{key:"loadAjaxContent",value:function(t){var e=this.fancybox,i=new XMLHttpRequest;e.showLoading(t),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&"ready"===e.state&&(e.hideLoading(t),200===i.status?e.setContent(t,i.responseText):e.setError(t,404===i.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},i.open("GET",t.src),i.send(t.ajax||null),t.xhr=i}},{key:"loadIframeContent",value:function(t){var e=this,i=this.fancybox,n=document.createElement("iframe");if(n.className="fancybox__iframe",n.setAttribute("id","fancybox__iframe_".concat(i.id,"_").concat(t.index)),n.setAttribute("allow","autoplay; fullscreen"),n.setAttribute("scrolling","auto"),t.$iframe=n,"iframe"!==t.type||!1===t.preload)return n.setAttribute("src",t.src),void this.fancybox.setContent(t,n);i.showLoading(t);var o=document.createElement("div");o.style.visibility="hidden",this.fancybox.setContent(t,o),o.appendChild(n),n.onerror=function(){i.setError(t,"{{IFRAME_ERROR}}")},n.onload=function(){var s=!1;"yes"!==n.dataset.ready&&(n.dataset.ready="yes",s=!0),n.src.length&&(i.hideLoading(t),n.parentNode.style.visibility="",!1!==t.autoSize&&e.autoSizeIframe(n),s&&i.animateCSS(o,i.option("showClass")))},n.setAttribute("src",t.src)}},{key:"autoSizeIframe",value:function(t){if(t.dataset&&"yes"===t.dataset.ready){var e=t.parentNode.style;e.flex="0 1 auto",e.width="",e.height="";try{var i=t.contentWindow.document,n=i.getElementsByTagName("html")[0],o=i.body,s=window.getComputedStyle(t.parentNode),a=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),r=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);o.style.overflow="hidden";var l=n.scrollWidth;e.width="".concat(l+a,"px"),o.style.overflow="",e.flex="",e.flexShrink="0",e.height="".concat(o.scrollHeight,"px");var c=n.scrollHeight;e.height="".concat(c+r,"px")}catch(t){e=""}}}},{key:"onCreateSlide",value:function(t,e){if(e&&!e.isDom)switch(e.type){case"html":this.fancybox.setContent(e,e.src);break;case"inline":case"clone":this.loadInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"iframe":case"pdf":case"video":case"map":this.loadIframeContent(e)}}},{key:"onRefresh",value:function(t){var e=this;t.slides.forEach((function(t){t.$iframe&&!1!==t.autoSize&&e.autoSizeIframe(t.$iframe)}))}},{key:"onDeleteSlide",value:function(t,e){e.state="destroy",e.xhr&&(e.xhr.abort(),e.xhr=null),e.$iframe&&(e.$iframe.onload=e.$iframe.onerror=null,e.$iframe.src="//about:blank",e.$iframe=null);var i=e.$content;if(i){i.classList.remove("fancybox__content"),"flex"===i.style.display&&(i.style.display="none");var n=i.querySelector(".fancybox__close.carousel__button");n&&n.remove();var o=i.$placeHolder;o?(o.parentNode.insertBefore(i,o),o.remove(),i.$placeHolder=null):i.remove(),e.$content=null}}},{key:"onSelectSlide",value:function(t,e){if("video"===e.type){!function t(){if("done"===e.state){var i;if(e.$iframe.isReady)return i="youtube"==e.video?{event:"command",func:"playVideo"}:{method:"play",value:"true"},void e.$iframe.contentWindow.postMessage(JSON.stringify(i),"*");if("youtube"===e.video){var n={event:"listening",id:e.$iframe.getAttribute("id")};e.$iframe.contentWindow.postMessage(JSON.stringify(n),"*")}e.poller=setTimeout(t,250)}}()}}},{key:"onUnselectSlide",value:function(t,e){var i=!1;"vimeo"==e.video?i={method:"pause",value:"true"}:"youtube"===e.video&&(i={event:"command",func:"pauseVideo"}),i&&e.$iframe.contentWindow.postMessage(JSON.stringify(i),"*"),clearTimeout(e.poller)}},{key:"onMessage",value:function(t){if("https://player.vimeo.com"===t.origin)try{if("ready"===JSON.parse(t.data).event){var e,i=p(document.getElementsByClassName("fancybox__iframe"));try{for(i.s();!(e=i.n()).done;){var n=e.value;n.contentWindow===t.source&&(n.isReady=1)}}catch(t){i.e(t)}finally{i.f()}}}catch(t){}else if("https://www.youtube-nocookie.com"===t.origin)try{var o=JSON.parse(t.data);"onReady"===o.event&&(document.getElementById(o.id).isReady=1)}catch(t){}}},{key:"onInit",value:function(){this.carousel=this.fancybox.Carousel.on({createSlide:this.onCreateSlide,deleteSlide:this.onDeleteSlide,refresh:this.onRefresh,selectSlide:this.onSelectSlide,unselectSlide:this.onUnselectSlide})}},{key:"attach",value:function(){this.fancybox.on("init",this.onInit),window.addEventListener("message",this.onMessage,!1)}},{key:"detach",value:function(){this.fancybox.on("init",this.onInit),window.removeEventListener("message",this.onMessage,!1),this.carousel&&(this.carousel.off({createSlide:this.onCreateSlide,deleteSlide:this.onDeleteSlide,refresh:this.onRefresh,selectSlide:this.onSelectSlide,unselectSlide:this.onUnselectSlide}),this.carousel=null)}}]),t}(),O=function(){function t(e){i(this,t),this.fancybox=e;for(var n=0,o=["onReady","onClosing","onPageChange","onCreateSlide","onRemoveSlide","onRefresh","onImageStatusChange","afterZoomIn"];n<o.length;n++){var s=o[n];this[s]=this[s].bind(this)}}return o(t,[{key:"onCreateSlide",value:function(t,e){var i=this;if(!(e.isDom||!e.$el||e.type&&"image"!==e.type)){!e.src&&e.$trigger&&e.$trigger instanceof HTMLImageElement&&(e.src=e.$trigger.currentSrc||e.$trigger.src);var n=e.$thumb,o=e.$trigger&&e.$trigger.origTarget;o&&(n=o instanceof HTMLImageElement?o:o.querySelector("img")),!n&&e.$trigger&&(n=e.$trigger instanceof HTMLImageElement?e.$trigger:e.$trigger.querySelector("img")),y(e,{$thumb:n,type:"image",state:"loading"});var s=document.createElement("div");s.style.visibility="hidden";var a=document.createElement("img");a.src=e.src,a.alt="",a.draggable=!1,a.classList.add("fancybox__image"),e.srcset&&a.setAttribute("srcset",e.srcset),e.sizes&&a.setAttribute("sizes",e.sizes),a.onload=function(){return i.onImageStatusChange(e)},a.onerror=function(){return i.onImageStatusChange(e)},s.appendChild(a),e.$image=a,this.fancybox.setContent(e,s),a.complete||a.error?(a.onload=a.onerror=null,this.onImageStatusChange(e)):a&&!a.complete&&this.fancybox.showLoading(e)}}},{key:"initSlidePanzoom",value:function(t){var e=this;if(!t.Panzoom){var i=t.$image;t.Panzoom=new S(t.$el,y(!0,this.fancybox.option("Image.Panzoom"),{delayMount:!0,content:i,panOnlyWhenZoomed:!0,click:!1,doubleClick:!1,wheel:!1})),t.Panzoom.on("afterAnimate updateMetrics",(function(){t.index===e.fancybox.getSlide().index&&e.handleCursor(t)})),t.Panzoom.on("touchMove",(function(){if(e.fancybox.Carousel.Panzoom.lockAxis)return!1})),this.fancybox.option("Image.wheel")&&t.Panzoom.on("wheel",(function(t,i){switch(e.fancybox.option("Image.wheel")){case"zoom":t.zoomWithWheel(i);break;case"close":e.fancybox.close();break;case"slide":e.fancybox[i.deltaY<0?"prev":"next"]()}return!1})),this.fancybox.option("Image.click")&&t.Panzoom.on("click",(function(t,i){return e.onClick(t,i)})),"toggleZoom"===this.fancybox.option("Image.doubleClick")&&t.Panzoom.on("doubleClick",(function(t,e){if(e.target.closest(".fancybox__content")){e.preventDefault(),e.stopPropagation();var i=e.clientX-t.$content.getClientRects()[0].left,n=e.clientY-t.$content.getClientRects()[0].top;t.toggleZoom({x:i,y:n})}})),t.Panzoom.mount()}}},{key:"onImageStatusChange",value:function(t){this.fancybox.hideLoading(t);var e=t.$image;e&&(e.complete&&e.width&&e.height?(t.state="ready",this.repaintImage(e),this.updateSlideDimensions(t),this.initSlidePanzoom(t),this.fancybox.trigger("load",t),this.revealSlideContent(t)):this.fancybox.setError(t,"{{IMAGE_ERROR}}"))}},{key:"repaintImage",value:function(t){t.style.maxHeight="unset",t.clientHeight,t.style.maxHeight=""}},{key:"updateSlideDimensions",value:function(t){var e=t.$image;if(e){var i=t.$content,n=t.$caption;if(i.style["max-width"]="",n&&(n.style["max-width"]=""),this.repaintImage(e),n)for(var o=0;o<3;o++)n&&e.width>50&&e.height>250&&n.clientWidth>e.width&&(n.style["max-width"]="".concat(e.width,"px"),i.style["max-width"]="");i.clientWidth>e.width&&(i.style["max-width"]="".concat(e.width,"px"))}}},{key:"revealSlideContent",value:function(t){null===this.fancybox.Carousel.prevPage&&t.index===this.fancybox.options.startIndex&&this.canZoom()?this.zoomIn():this.fancybox.revealContent(t)}},{key:"done",value:function(t){this.fancybox.done(t),this.handleCursor(t)}},{key:"canZoom",value:function(){var t=this.fancybox,e=t.$container,i=!1;if(!1===t.option("Image.animateThumbnail"))return i;var n=t.getSlide(),o=n.$thumb;if(!o||"ready"!==n.state&&"done"!==n.state)return i;/Trident\/|MSIE/.test(window.navigator.userAgent)&&(e.style.visibility="hidden",e.clientHeight,e.style.visibility=""),e.style.pointerEvents="none";var s=o.getBoundingClientRect();if(this.fancybox.option("Image.ignoreCoveredThumbnail")){var a=document.elementFromPoint(s.left+1,s.top+1)===o,r=document.elementFromPoint(s.right-1,s.bottom-1)===o;i=a&&r}else i=document.elementFromPoint(s.left+.5*s.width,s.top+.5*s.height)===o;return e.style.pointerEvents="",i}},{key:"zoomIn",value:function(){var t=this.fancybox.getSlide(),e=t.Panzoom,i=t.$thumb.getBoundingClientRect(),n=t.$content.getBoundingClientRect(),o=n.width,s=n.height,a=n.top+.5*s-(i.top+.5*i.height),r=n.left+.5*o-(i.left+.5*i.width);e.detachEvents(),this.fancybox.trigger("reveal",t),e.panTo({x:-1*r,y:-1*a,scale:i.width/o,friction:0,ignoreBounds:!0}),t.$content.style.visibility="",e.panTo({x:0,y:0,scale:1,friction:.8}).once("afterAnimate",this.afterZoomIn)}},{key:"afterZoomIn",value:function(t){t.attachEvents(),this.done(this.fancybox.getSlide())}},{key:"zoomOut",value:function(){var t=this.fancybox,e=t.Carousel.pages[t.Carousel.page].slides[0],i=e.Panzoom,n=e.$thumb;i.off("afterAnimate",this.afterZoomIn),t.state="customClosing",e.$caption&&(e.$caption.style.visibility="hidden");var o=.65,s=function(){var t=n.getBoundingClientRect(),s=e.$content.getBoundingClientRect(),a=s.width,r=s.height,l=s.top+.5*r-(t.top+.5*t.height),c=s.left+.5*a-(t.left+.5*t.width);i.panTo({x:-1*c,y:-1*l,scale:t.width/a,ignoreBounds:!0,friction:o}),o*=.98};!1===t.option("hideScrollbar")&&window.addEventListener("scroll",s),i.on("afterAnimate",(function(){window.removeEventListener("scroll",s),t.destroy()})),s()}},{key:"handleCursor",value:function(t){var e=t.Panzoom;e&&1===e.current.scale&&e.option("maxZoom")-e.current.scale>.01?t.$el.classList.add(this.fancybox.option("Image.canZoomInClass")):t.$el.classList.remove(this.fancybox.option("Image.canZoomInClass"))}},{key:"onClick",value:function(t,e){if(!(this.fancybox.Carousel.Panzoom.drag.distance>=6||this.fancybox.Carousel.Panzoom.lockAxis||"IMG"!=e.target.tagName&&!e.target.classList.contains("fancybox__content")))switch(e.preventDefault(),e.stopPropagation(),this.fancybox.option("Image.click")){case"toggleZoom":var i=e.clientX-t.$content.getClientRects()[0].left,n=e.clientY-t.$content.getClientRects()[0].top;t.toggleZoom({x:i,y:n});break;case"close":this.fancybox.close();break;case"next":this.fancybox.next();break;case"prev":this.fancybox.prev()}}},{key:"onRefresh",value:function(){var t=this;this.fancybox.Carousel.slides.forEach((function(e){e.Panzoom&&t.updateSlideDimensions(e)}))}},{key:"onRemoveSlide",value:function(t,e){e.$el.classList.remove(this.fancybox.option("Image.canZoomInClass")),e.$image&&(e.$image.onload=e.$image.onerror=null,e.$image.remove(),e.$image=null),e.Panzoom&&(e.Panzoom.destroy(),e.Panzoom=null),e.state=null}},{key:"onReady",value:function(){var t=this;this.carousel=this.fancybox.Carousel.on({change:this.onPageChange,createSlide:this.onCreateSlide,deleteSlide:this.onRemoveSlide,refresh:this.onRefresh}),this.carousel.slides.forEach((function(e){t.onCreateSlide(null,e)}))}},{key:"onClosing",value:function(){var t=this;this.carousel.slides.forEach((function(e){e.$image&&(e.$image.onload=e.$image.onerror=null),e.Panzoom&&(e.Panzoom.off("afterAnimate",t.afterZoomIn),e.Panzoom.detachEvents())})),"closing"===this.fancybox.state&&this.canZoom()&&this.zoomOut()}},{key:"onPageChange",value:function(){var t=this,e=this.fancybox.getSlide();this.carousel.slides.forEach((function(i){i.Panzoom&&(i.index===e.index?0===t.fancybox.Carousel.Panzoom.velocity.x&&t.revealSlideContent(i):i.Panzoom.panTo({x:0,y:0,scale:1,friction:.8}))}))}},{key:"attach",value:function(){this.fancybox.on({ready:this.onReady,closing:this.onClosing})}},{key:"detach",value:function(){this.fancybox.off({ready:this.onReady,closing:this.onClosing}),this.carousel&&(this.carousel.off({change:this.onPageChange,createSlide:this.onCreateSlide,deleteSlide:this.onRemoveSlide,refresh:this.onRefresh}),this.carousel=null)}}]),t}();O.defaults={Panzoom:{maxZoom:1},canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",animateThumbnail:!0,ignoreCoveredThumbnail:!1,click:"toggleZoom",doubleClick:"",wheel:"zoom"};var R={ScrollLock:z,Thumbs:D,Html:_,Image:O},N=0,F=null,W=function(t){var e=y(!0,{},t.items[t.startIndex||0]||{});return t.items.forEach((function(t){var e=t.$trigger;if(e){var i=e.dataset||{};t.src=i.src||e.getAttribute("href")||t.src,t.type=i.type||t.type}})),y(!0,{},Z.defaults,t,e)},Z=function(t){s(n,t);var e=h(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,n),(t=e.call(this,W(o))).state="init",t.bindHandlers(),t.attachPlugins(n.Plugins),!0===t.option("hideScrollbar")&&t.hideScrollbar(),t.initLayout(),t.initCarousel(),t.trigger("init"),!0!==t.option("delayMount")&&t.mount(),t}return o(n,[{key:"mount",value:function(){this.Carousel.mount(),this.attachEvents(),this.$container.setAttribute("aria-hidden","false"),this.state="ready",this.trigger("ready")}},{key:"bindHandlers",value:function(){for(var t=0,e=["onMousedown","onKeydown","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onClick","onTransform"];t<e.length;t++){var i=e[t];this[i]=this[i].bind(this)}var n;n=!1,document.createElement("div").focus({get preventScroll(){return n=!0,!1}}),F=n}},{key:"attachEvents",value:function(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown)}},{key:"detachEvents",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown)}},{key:"initLayout",value:function(){var t=this;this.$root=this.option("parentEl")||document.body;var e=this.option("template.main");return e&&(this.$root.insertAdjacentHTML("beforeend",this.localize(e)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=function(){return t.$container.scrollLeft=0,!1},Object.entries({class:"fancybox__container",role:"dialog","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach((function(e){var i;return(i=t.$container).setAttribute.apply(i,u(e))})),this.option("animated")&&this.$container.classList.add("animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),this.$container.Fancybox=this,this.id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++N,this.$container.setAttribute("id","fancybox-"+this.id)),document.documentElement.classList.add("with-fancybox"),this}},{key:"animateCSS",value:function(t,e,i){if(t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),t&&e){t.addEventListener("animationend",(function n(o){o.currentTarget===this&&(t.classList.remove(e),t.removeEventListener("animationend",n),i&&i())})),t.classList.add(e)}else i&&i()}},{key:"initCarousel",value:function(){var t=this;this.Carousel=new A(this.$carousel,y(!0,{},{Dots:!1,textSelection:!0,preload:this.option("preload"),friction:.88,slides:y([],this.options.items),initialPage:this.options.startIndex,delayMount:!0,infiniteX:this.option("infinite"),infiniteY:!0,Panzoom:{panOnlyWhenZoomed:!1,lockAxis:function(){return t.Carousel.pages.length>1?"xy":"y"}},l10n:this.option("l10n")},this.option("Carousel"))),this.Carousel.on("createSlide",this.onCreateSlide),this.Carousel.on("settle",this.onSettle);var e=this.Carousel.Panzoom;return e.on("touchMove",this.onTouchMove),e.on("touchEnd",this.onTouchEnd),e.on("click",this.onClick),this.$backdrop&&e.on("afterTransform",this.onTransform),this}},{key:"onCreateSlide",value:function(t,e){var i=e.caption;if(i){var n=document.createElement("div"),o="fancybox__caption_".concat(this.id,"_").concat(e.index);n.className="fancybox__caption",n.innerHTML=i,n.setAttribute("id",o),e.$caption=e.$el.appendChild(n),e.$el.classList.add("has-caption"),e.$el.setAttribute("aria-labelledby",o)}}},{key:"onSettle",value:function(){this.focus()}},{key:"onTransform",value:function(t){var e=Math.abs(t.current.y),i=e<1?"":Math.max(.5,Math.min(1,1-e/t.$content.clientHeight*1.3));this.$backdrop.style.opacity=i,this.$backdrop.style.transitionDuration=i?"0s":""}},{key:"onTouchMove",value:function(){var t=this.getSlide().Panzoom;return!t||1===t.current.scale}},{key:"onTouchEnd",value:function(t){(Math.abs(t.current.y)>=150||Math.abs(t.current.y)>=35&&t.drag.elapsedTime<350)&&(this.option("hideClass")&&(this.getSlide().hideClass="throwOut".concat(t.current.y<0?"Up":"Down")),this.close())}},{key:"onClick",value:function(t,e){if(!e.target.closest(".fancybox__content"))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}},{key:"onMousedown",value:function(){document.body.classList.add("is-using-mouse")}},{key:"onKeydown",value:function(t){if(n.getInstance().id===this.id){document.body.classList.remove("is-using-mouse");var e=t.key;if("Tab"===e&&this.option("trapFocus"))this.focus(t);else{var i=this.option("keyboard");if(i&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){var o=document.activeElement&&document.activeElement.classList,s=o&&(o.contains("carousel__button")||o.contains("fancybox__close"));if("Escape"!==e&&!s)if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(t.target.nodeName))return;if(!1!==this.trigger("keydown",e)){"Enter"!==e&&t.preventDefault();var a=i[e];"function"==typeof this[a]&&this[a]()}}}}}},{key:"getSlide",value:function(){var t=this.Carousel;return t&&null!==t.page?t.pages[t.page].slides[0]:null}},{key:"focus",value:function(t){var e=function(t){t.setActive?t.setActive():F?t.focus({preventScroll:!0}):t.focus()};t&&t.preventDefault();var i=this.getSlide().$el;i.tabIndex=0;var n,o=[],s=p([].slice.call(this.$container.querySelectorAll(["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'])));try{for(s.s();!(n=s.n()).done;){var a=n.value;if(!a.classList||!a.classList.contains("carousel__slide")){var r=a.closest(".carousel__slide");r?r===i&&o[a.hasAttribute("autofocus")?"unshift":"push"](a):o.push(a)}}}catch(t){s.e(t)}finally{s.f()}if(o.push(i),o.length){var l=o.indexOf(document.activeElement),c=t&&!t.shiftKey,h=t&&t.shiftKey;return c?l===o.length-1?e(o[0]):e(o[l+1]):h?e(0===l?o[o.length-1]:o[l-1]):l<0?e(o[0]):void 0}}},{key:"hideScrollbar",value:function(){var t=window.innerWidth-document.documentElement.getBoundingClientRect().width;if(t&&!document.getElementById("fancybox-style-noscroll")){var e=document.createElement("style");e.id="fancybox-style-noscroll",e.type="text/css",e.innerHTML=".compensate-for-scrollbar{padding-right: ".concat(t,"px;}"),document.getElementsByTagName("head")[0].appendChild(e),document.body.classList.add("compensate-for-scrollbar")}}},{key:"revealScrollbar",value:function(){var t=document.getElementById("fancybox-style-noscroll");t&&t.remove(),document.body.classList.remove("compensate-for-scrollbar")}},{key:"setContent",value:function(t,e){var i,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.$el;if(e instanceof HTMLElement?["img","iframe","video","audio"].indexOf(e.nodeName.toLowerCase())>-1?(i=document.createElement("div")).appendChild(e):i=e:(i=document.createElement("div")).innerHTML=e,!(i instanceof Element))throw new Error("Element expected");t.$content&&this.Carousel.trigger("deleteSlide",t),t.contentClassName&&s.classList.remove(t.contentClassName),i.classList.add("fancybox__content"),t.id&&i.setAttribute("id",t.id),t.contentClassName="has-".concat(o.suffix||t.type||"unknown"),s.classList.add(t.contentClassName),t.$content=i,s.insertBefore(i,s.querySelector(".fancybox__caption"));var a=i.querySelector(".fancybox__close.carousel__button");a&&a.remove();var r=void 0===t.closeButton?this.option("closeButton"):t.closeButton;if(r&&("inline"===r||"top"===r&&!this.$closeButton)){var l=document.createElement("button");l.classList.add("fancybox__close"),l.classList.add("carousel__button"),l.setAttribute("title",this.options.l10n.CLOSE),l.innerHTML=this.option("template.closeButton"),l.addEventListener("click",(function(t){return n.close(t)})),"inline"===r?t.$content.appendChild(l):this.$closeButton=this.$container.insertBefore(l,this.$container.firstChild)}"loading"!==t.state&&(this.trigger("afterLoad",t),this.revealContent(t))}},{key:"revealContent",value:function(t){var e=this;this.trigger("reveal",t),t.$content.style.visibility="";var i=void 0===t.showClass?this.option("showClass"):t.showClass;this.animateCSS(t.$content,i,(function(){e.done(t)}))}},{key:"done",value:function(t){if("init"===this.state||"ready"===this.state){t.state="done",this.trigger("done",t);var e=this.getSlide();e&&t.index===e.index&&this.option("autoFocus")&&this.focus()}}},{key:"setError",value:function(t,e){this.hideLoading(t),t.state="error";var i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,i,{suffix:"error"})}},{key:"showLoading",value:function(t){var e=this;if(t&&t.$el){if(t.$el.classList.add("is-loading"),!t.$el.querySelector(".fancybox__loading")){var i=document.createElement("div");i.classList.add("fancybox__loading"),i.appendChild(document.createElement("div")),i.addEventListener("click",(function(){e.Carousel.Panzoom.velocity||e.close()})),t.$el.insertBefore(i,t.$el.firstChild)}t.state="loading"}}},{key:"hideLoading",value:function(t){if(t.$el){var e=t.$el.querySelector(".fancybox__loading");e&&e.remove(),t.$el.classList.remove("is-loading")}}},{key:"next",value:function(){var t=this.Carousel;t&&t.pages.length>1&&t.slideNext()}},{key:"prev",value:function(){var t=this.Carousel;t&&t.pages.length>1&&t.slidePrev()}},{key:"jumpTo",value:function(){var t;this.Carousel&&(t=this.Carousel).slideTo.apply(t,arguments)}},{key:"close",value:function(t){var e=this;if(t&&t.preventDefault(),"closing"!==this.state&&"customClosing"!==this.state&&!1!==this.trigger("shouldClose",t)){this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",t),this.$container.setAttribute("aria-hidden","true"),this.$container.classList.remove("show"),this.$container.classList.add("closing"),this.$backdrop.style.opacity="";var i=this.getSlide();if(this.Carousel.slides.forEach((function(t){t.$content&&t.index!==i.index&&t.$content.remove()})),"closing"===this.state){var n=void 0===i.hideClass?this.option("hideClass"):i.hideClass;this.animateCSS(i.$content,n,(function(){e.destroy()}))}}}},{key:"destroy",value:function(){this.state="destroy",this.trigger("destroy");var t=this.option("placeFocusBack")?this.getSlide().$trigger:null;this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null;var e=n.getInstance();if(e)e.focus();else if(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar(),t)if(F)t.focus({preventScroll:!0});else{var i=document.body.scrollTop;t.focus(),document.body.scrollTop=i}}}],[{key:"fromEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.defaultPrevented&&!(t.button&&0!==t.button||t.ctrlKey||t.metaKey||t.shiftKey)){var i=t.target,o=[],s=0,a=function(t){for(var e=["false","0","no","null"],i=["true","1","yes"],n=Object.assign({},t.dataset),o=0,s=Object.entries(n);o<s.length;o++){var a=d(s[o],2),r=a[0],l=a[1];if("string"==typeof l||l instanceof String)if(e.indexOf(l)>-1)n[r]=!1;else if(i.indexOf(n[r])>-1)n[r]=!0;else try{n[r]=JSON.parse(l)}catch(t){n[r]=l}}return delete n.fancybox,delete n.type,n.$trigger=t,n};Array.from(n.openers.keys()).reverse().some((function(s){if((i=t.target).matches(s)||(i=i.closest(s))){t.preventDefault();var a=(e=y({},e,n.openers.get(s))).groupAttr||"data-fancybox";if(s&&s==="[".concat(a,"]")){var r=i.getAttribute("".concat(a));s=!(!r.length||"true"===r)&&"[".concat(a,"='").concat(r,"']")}return o=s?[].slice.call(document.querySelectorAll(s)):[i],!0}}));var r=n.getInstance();if(!(r&&o.indexOf(r.options.$trigger)>-1)){if(o.length)s=o.indexOf(i),o=o.map(a),i.origTarget=t.detail&&t.detail.origTarget,new n(y({},e,{items:o,startIndex:s,$trigger:i}));else{var l=(i=(i=t.target).dataset&&i.dataset.fancyboxTrigger?i:i.closest("[data-fancybox-trigger]"))&&i.dataset&&i.dataset.fancyboxTrigger;if(l){var c=document.querySelectorAll('[data-fancybox="'.concat(l,'"]')),h=parseInt(i.dataset.fancyboxIndex,10)||0,u=c.length?c[h]:null;if(u){var f=new CustomEvent("click",{bubbles:!0,cancelable:!0,detail:{origTarget:t.target}});u.dispatchEvent(f)}}}var v=n.getInstance();v&&"ready"===v.state&&t.detail&&document.body.classList.add("is-using-mouse")}}}},{key:"assign",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"undefined"!=typeof document&&(n.openers.size||document.addEventListener("click",(function(t){return n.fromEvent(t)})),n.openers.set(t,e))}},{key:"trash",value:function(t){n.openers.delete(t),n.openers.size||document.removeEventListener("click",n.fromEvent,!1)}},{key:"getInstance",value:function(t){var e=null;if(t)e=document.getElementById("fancybox-".concat(t));else{var i=document.querySelectorAll(".fancybox__container");e=i.length&&i[i.length-1]}var n=e&&e.Fancybox;return n&&"closing"!==n.state&&"customClosing"!==n.state?n:null}},{key:"close",value:function(){for(var t=null;t=n.getInstance();)t.close()}}]),n}($);Z.version="4.0.0-alpha.3",Z.Plugins=R,Z.defaults={hideScrollbar:!0,items:[],startIndex:0,preload:1,infinite:!0,showClass:!1,hideClass:"fadeOut",animated:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6L18 18" /></svg>',main:null},parentEl:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inline",l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page"}},Z.openers=new Map,Z.isMobile=function(){return!!navigator&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},Z.assign("[data-fancybox]"),"undefined"!=typeof window&&(window.Panzoom=S,window.Carousel=A,window.Fancybox=Z),t.Carousel=A,t.Fancybox=Z,t.Panzoom=S}));
